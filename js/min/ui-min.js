var UI={settings:{templateSettings:{interpolate:/\{\{(.+?)\}\}/g}}};UI.Template=function(t){_.templateSettings=UI.settings.templateSettings;var e=function(){var e=$("#"+t).html();return e?e:void console.error("UI.Template","Template is empty!")};this.render=function(t){var i=_.template(e());return i(t)}},UI.Checker=function(t){var e=this;this.options=$.extend({selector:".checker",onCheck:function(t){},onUncheck:function(t){}},t),$(this.options.selector).find(">a").off("click.UIChecker").on("click.UIChecker",function(t){t.preventDefault();var i="";$(this).data("activeClass")&&(i=" "+$(this).data("activeClass")),$(this).hasClass("active")?($(this).removeClass("active"+i),e.options.onUncheck($(this))):($(this).addClass("active"+i),e.options.onCheck($(this)))})},UI.Popup=function(t){var e=this;this.$popup=null,this.waitingMode=!1,this.options=$.extend({width:400,onShow:function(){},onHide:function(){}},t);var i=function(){n(),e.$popup&&e.$popup.find(".close").on("click",function(t){t.preventDefault(),e.hide()}),$(window).on("resize.UIPopup",function(){p()}),$(document).on("keyup.UIPopup",function(t){switch(t.keyCode){case 27:e.hide()}})},n=function(){$(document).off("keyup.UIPopup")},o=function(t,e){var i=new UI.Template("template-ui-popup");return i.render({title:t,content:e})},p=function(){if(e.$popup){var t=e.$popup.find(".popup").outerHeight();e.$popup.find(".popup").css({width:e.options.width,marginTop:-t/2,marginLeft:-e.options.width/2})}};this.showMessage=function(t,i){var n=new UI.Template("template-ui-popup-message"),o="";switch(i){case"error":o="bg-bittersweet-dark";break;case"ok":o="bg-mint-dark";break;default:o="bg-medium-gray-dark"}var p=n.render({className:o,text:t});e.$popup&&e.$popup.find(".messages").html(p)},this.changeContent=function(t){this.$popup&&(this.$popup.find(".content").html(t),p())},this.changeTitle=function(t){this.$popup&&(this.$popup.find(".title").html(t),p())},this.setWaitingMode=function(){this.waitingMode=!0,e.$popup&&e.$popup.find(".popup").addClass("wait")},this.removeWaitingMode=function(){this.waitingMode=!1,e.$popup&&e.$popup.find(".popup").removeClass("wait")},this.show=function(t,e){this.hide(),this.$popup=$(o(t,e)),$("body").append(this.$popup),this.options.onShow(this),i(),p()},this.hide=function(){n(),this.$popup&&this.$popup.remove(),this.options.onHide(this)}};