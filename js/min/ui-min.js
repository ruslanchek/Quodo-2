var UI={settings:{templateSettings:{interpolate:/\{\{(.+?)\}\}/g}}};UI.Template=function(t){_.templateSettings=UI.settings.templateSettings;var i=function(){var i=$("#"+t).html();return i?i:void console.error("UI.Template","Template "+t+" is empty!")};this.render=function(t){var e=_.template(i());return e(t)}},UI.Checker=function(t){var i=this;this.options=$.extend({selector:".checker",onCheck:function(t){},onUncheck:function(t){}},t),$(this.options.selector).find(">a").off("click.UIChecker").on("click.UIChecker",function(t){t.preventDefault();var e="";$(this).data("activeClass")&&(e=" "+$(this).data("activeClass")),$(this).hasClass("active")?($(this).removeClass("active"+e),i.options.onUncheck($(this))):($(this).addClass("active"+e),i.options.onCheck($(this)))})},UI.Popup=function(t){var i=this,e=300;this.$popup=null,this.waitingMode=!1,this.options=$.extend({width:400,onShow:function(){},onHide:function(){}},t);var o=function(){p(),i.$popup&&i.$popup.find(".close").on("click",function(t){t.preventDefault(),i.hide()}),$(window).on("resize.UIPopup",function(){s()}),$(document).on("keyup.UIPopup",function(t){switch(t.keyCode){case 27:i.hide()}})},p=function(){$(document).off("keyup.UIPopup")},n=function(t,i){var e=new UI.Template("template-ui-popup");return e.render({title:t,content:i})},s=function(){if(i.$popup){var t=i.$popup.find(".popup").outerHeight();i.$popup.find(".popup").css({width:i.options.width,marginTop:-t/2,marginLeft:-i.options.width/2})}},a=function(t){if(i.$popup){var o=i.$popup,p=i.$popup.find(".popup");o.transition({opacity:0},0),o.css({display:"block"}),p.transition({scale:0,perspective:"1000px",rotateX:"20deg"},0),p.css({display:"block"}),setTimeout(function(){o.transition({opacity:1},e),p.transition({scale:1,rotateX:"0deg"},e,"easeOutBack"),t&&t()},50)}else t&&t()},u=function(t){if(i.$popup){var o=i.$popup,p=i.$popup.find(".popup");o.transition({opacity:0},e),p.transition({scale:0,rotateX:"20deg"},e,"easeInBack"),setTimeout(function(){t&&t()},e)}else t&&t()};this.showMessage=function(t,e){var o=new UI.Template("template-ui-popup-message"),p="";switch(e){case"error":p="bg-bittersweet-dark";break;case"ok":p="bg-mint-dark";break;default:p="bg-medium-gray-dark"}var n=o.render({className:p,text:t});i.$popup&&i.$popup.find(".messages").html(n)},this.changeContent=function(t){this.$popup&&(this.$popup.find(".content").html(t),s())},this.changeTitle=function(t){this.$popup&&(this.$popup.find(".title").html(t),s())},this.setWaitingMode=function(){this.waitingMode=!0,i.$popup&&i.$popup.find(".popup").addClass("wait")},this.removeWaitingMode=function(){this.waitingMode=!1,i.$popup&&i.$popup.find(".popup").removeClass("wait")},this.show=function(t,e){this.hide(),this.$popup=$(n(t,e)),$("body").append(this.$popup),a(function(){o(),s(),i.options.onShow(this)})},this.hide=function(){this.$popup&&u(function(){p(),i.$popup.remove(),i.options.onHide(this),i.$popup=null})}};